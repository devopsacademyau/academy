# c02-network07

## Commands Execution Output

- Commands for creating the route tables:
```

➜  ~ aws ec2 create-route-table --vpc-id vpc-01cf6494735903d97
-------------------------------------------------------------------------
|                           CreateRouteTable                            |
+-----------------------------------------------------------------------+
||                             RouteTable                              ||
|+---------------+--------------------------+--------------------------+|
||    OwnerId    |      RouteTableId        |          VpcId           ||
|+---------------+--------------------------+--------------------------+|
||  738343455957 |  rtb-0d4fb188c66b62c98   |  vpc-01cf6494735903d97   ||
|+---------------+--------------------------+--------------------------+|
|||                              Routes                               |||
||+-----------------------+------------+--------------------+---------+||
||| DestinationCidrBlock  | GatewayId  |      Origin        |  State  |||
||+-----------------------+------------+--------------------+---------+||
|||  192.168.0.0/16       |  local     |  CreateRouteTable  |  active |||
||+-----------------------+------------+--------------------+---------+||
➜  ~ aws ec2 create-tags --resources rtb-0d4fb188c66b62c98 --tags Key=Name,Value=devopsacademy-rt-private

➜  ~ aws ec2 create-route-table --vpc-id vpc-01cf6494735903d97
➜  ~ aws ec2 create-tags --resources rtb-00e38d03338e4d707 --tags Key=Name,Value=devopsacademy-rt-public

-------------------------------------------------------------------------------------
|                                DescribeRouteTables                                |
+-----------------------------------------------------------------------------------+
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-0005be46de3bb0780       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                 Associations                                  |||
||+--------+--------------------------------------+-------------------------------+||
|||  Main  |       RouteTableAssociationId        |         RouteTableId          |||
||+--------+--------------------------------------+-------------------------------+||
|||  True  |  rtbassoc-0ad944950435e9fc1          |  rtb-0005be46de3bb0780        |||
||+--------+--------------------------------------+-------------------------------+||
||||                              AssociationState                               ||||
|||+-----------------------------+-----------------------------------------------+|||
||||  State                      |  associated                                   ||||
|||+-----------------------------+-----------------------------------------------+|||
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-00e38d03338e4d707       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||                                     Tags                                      |||
||+-----------------+-------------------------------------------------------------+||
|||       Key       |                            Value                            |||
||+-----------------+-------------------------------------------------------------+||
|||  Name           |  devopsacademy-rt-public                                    |||
||+-----------------+-------------------------------------------------------------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-02d6e319695962c50       |  vpc-04220c24c443ac9b4        ||
|+------------------+------------------------------+-------------------------------+|
|||                                 Associations                                  |||
||+--------+--------------------------------------+-------------------------------+||
|||  Main  |       RouteTableAssociationId        |         RouteTableId          |||
||+--------+--------------------------------------+-------------------------------+||
|||  True  |  rtbassoc-08412103c96400501          |  rtb-02d6e319695962c50        |||
||+--------+--------------------------------------+-------------------------------+||
||||                              AssociationState                               ||||
|||+-----------------------------+-----------------------------------------------+|||
||||  State                      |  associated                                   ||||
|||+-----------------------------+-----------------------------------------------+|||
|||                                    Routes                                     |||
||+----------------------+-------------------------+--------------------+---------+||
||| DestinationCidrBlock |        GatewayId        |      Origin        |  State  |||
||+----------------------+-------------------------+--------------------+---------+||
|||  172.31.0.0/16       |  local                  |  CreateRouteTable  |  active |||
|||  0.0.0.0/0           |  igw-09de37ae93a25c498  |  CreateRoute       |  active |||
||+----------------------+-------------------------+--------------------+---------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-0d4fb188c66b62c98       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||                                     Tags                                      |||
||+----------------+--------------------------------------------------------------+||
:
|||+-----------------------------+-----------------------------------------------+|||
||||  State                      |  associated                                   ||||
|||+-----------------------------+-----------------------------------------------+|||
|||                                    Routes                                     |||
||+----------------------+-------------------------+--------------------+---------+||
||| DestinationCidrBlock |        GatewayId        |      Origin        |  State  |||
||+----------------------+-------------------------+--------------------+---------+||
|||  172.31.0.0/16       |  local                  |  CreateRouteTable  |  active |||
|||  0.0.0.0/0           |  igw-09de37ae93a25c498  |  CreateRoute       |  active |||
||+----------------------+-------------------------+--------------------+---------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-0d4fb188c66b62c98       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||                                     Tags                                      |||
||+----------------+--------------------------------------------------------------+||
|||       Key      |                            Value                             |||
:
|||+-----------------------------+-----------------------------------------------+|||
||||  State                      |  associated                                   ||||
|||+-----------------------------+-----------------------------------------------+|||
|||                                    Routes                                     |||
||+----------------------+-------------------------+--------------------+---------+||
||| DestinationCidrBlock |        GatewayId        |      Origin        |  State  |||
||+----------------------+-------------------------+--------------------+---------+||
|||  172.31.0.0/16       |  local                  |  CreateRouteTable  |  active |||
|||  0.0.0.0/0           |  igw-09de37ae93a25c498  |  CreateRoute       |  active |||
||+----------------------+-------------------------+--------------------+---------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-0d4fb188c66b62c98       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||                                     Tags                                      |||
||+----------------+--------------------------------------------------------------+||
|||       Key      |                            Value                             |||
||+----------------+--------------------------------------------------------------+||
|||  Name          |  devopsacademy-rt-private                                    |||
||+----------------+--------------------------------------------------------------+||
~
~
~
~
~
~
~
~
~
~
~
~
~
~
(END)
|||+-----------------------------+-----------------------------------------------+|||
||||  State                      |  associated                                   ||||
|||+-----------------------------+-----------------------------------------------+|||
|||                                    Routes                                     |||
||+----------------------+-------------------------+--------------------+---------+||
||| DestinationCidrBlock |        GatewayId        |      Origin        |  State  |||
||+----------------------+-------------------------+--------------------+---------+||
|||  172.31.0.0/16       |  local                  |  CreateRouteTable  |  active |||
|||  0.0.0.0/0           |  igw-09de37ae93a25c498  |  CreateRoute       |  active |||
||+----------------------+-------------------------+--------------------+---------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-0d4fb188c66b62c98       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||                                     Tags                                      |||
||+----------------+--------------------------------------------------------------+||
|||       Key      |                            Value                             |||
||+----------------+--------------------------------------------------------------+||
|||  Name          |  devopsacademy-rt-private                                    |||
||+----------------+--------------------------------------------------------------+||
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
(END)
|+------------------+------------------------------+-------------------------------+|
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-00e38d03338e4d707       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||                                     Tags                                      |||
||+-----------------+-------------------------------------------------------------+||
|||       Key       |                            Value                            |||
||+-----------------+-------------------------------------------------------------+||
|||  Name           |  devopsacademy-rt-public                                    |||
||+-----------------+-------------------------------------------------------------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-02d6e319695962c50       |  vpc-04220c24c443ac9b4        ||
|+------------------+------------------------------+-------------------------------+|
|||                                 Associations                                  |||
||+--------+--------------------------------------+-------------------------------+||
|||  Main  |       RouteTableAssociationId        |         RouteTableId          |||
||+--------+--------------------------------------+-------------------------------+||
|||  True  |  rtbassoc-08412103c96400501          |  rtb-02d6e319695962c50        |||
||+--------+--------------------------------------+-------------------------------+||
||||                              AssociationState                               ||||
|||+-----------------------------+-----------------------------------------------+|||
||||  State                      |  associated                                   ||||
|||+-----------------------------+-----------------------------------------------+|||
|||                                    Routes                                     |||
||+----------------------+-------------------------+--------------------+---------+||
||| DestinationCidrBlock |        GatewayId        |      Origin        |  State  |||
||+----------------------+-------------------------+--------------------+---------+||
|||  172.31.0.0/16       |  local                  |  CreateRouteTable  |  active |||
|||  0.0.0.0/0           |  igw-09de37ae93a25c498  |  CreateRoute       |  active |||
||+----------------------+-------------------------+--------------------+---------+||
||                                   RouteTables                                   ||
|+------------------+------------------------------+-------------------------------+|
||      OwnerId     |        RouteTableId          |             VpcId             ||
|+------------------+------------------------------+-------------------------------+|
||  738343455957    |  rtb-0d4fb188c66b62c98       |  vpc-01cf6494735903d97        ||
|+------------------+------------------------------+-------------------------------+|
|||                                    Routes                                     |||
||+---------------------------+---------------+-----------------------+-----------+||
|||   DestinationCidrBlock    |   GatewayId   |        Origin         |   State   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||  192.168.0.0/16           |  local        |  CreateRouteTable     |  active   |||
||+---------------------------+---------------+-----------------------+-----------+||
|||                                     Tags                                      |||
||+----------------+--------------------------------------------------------------+||
|||       Key      |                            Value                             |||
||+----------------+--------------------------------------------------------------+||
|||  Name          |  devopsacademy-rt-private                                    |||
||+----------------+--------------------------------------------------------------+||

```

- Commands for associating the route tables with subnets:
```
Private first:
➜  ~ aws ec2 associate-route-table --route-table-id rtb-0d4fb188c66b62c98 --subnet-id subnet-0ae613de296de90d6
➜  ~ aws ec2 associate-route-table --route-table-id rtb-0d4fb188c66b62c98 --subnet-id subnet-079a1c39db6013bf3
➜  ~ aws ec2 associate-route-table --route-table-id rtb-0d4fb188c66b62c98 --subnet-id subnet-02a1501937c03b796
--------------------------------------------------------------------------------------------------
|                                       DescribeRouteTables                                      |
+------------------------------------------------------------------------------------------------+
||                                          RouteTables                                         ||
|+---------------------+-----------------------------------+------------------------------------+|
||       OwnerId       |           RouteTableId            |               VpcId                ||
|+---------------------+-----------------------------------+------------------------------------+|
||  738343455957       |  rtb-0d4fb188c66b62c98            |  vpc-01cf6494735903d97             ||
|+---------------------+-----------------------------------+------------------------------------+|
|||                                        Associations                                        |||
||+------+------------------------------+-------------------------+----------------------------+||
||| Main |   RouteTableAssociationId    |      RouteTableId       |         SubnetId           |||
||+------+------------------------------+-------------------------+----------------------------+||
|||False |  rtbassoc-085463368656726d9  |  rtb-0d4fb188c66b62c98  |  subnet-079a1c39db6013bf3  |||
||+------+------------------------------+-------------------------+----------------------------+||
||||                                     AssociationState                                     ||||
|||+----------------------------------+-------------------------------------------------------+|||
||||  State                           |  associated                                           ||||
|||+----------------------------------+-------------------------------------------------------+|||
|||                                        Associations                                        |||
||+------+------------------------------+-------------------------+----------------------------+||
||| Main |   RouteTableAssociationId    |      RouteTableId       |         SubnetId           |||
||+------+------------------------------+-------------------------+----------------------------+||
|||False |  rtbassoc-02bd564876e070c1b  |  rtb-0d4fb188c66b62c98  |  subnet-02a1501937c03b796  |||
||+------+------------------------------+-------------------------+----------------------------+||
||||                                     AssociationState                                     ||||
|||+----------------------------------+-------------------------------------------------------+|||
||||  State                           |  associated                                           ||||
|||+----------------------------------+-------------------------------------------------------+|||
|||                                        Associations                                        |||
||+------+------------------------------+-------------------------+----------------------------+||
||| Main |   RouteTableAssociationId    |      RouteTableId       |         SubnetId           |||
||+------+------------------------------+-------------------------+----------------------------+||
|||False |  rtbassoc-0f87ed6ec81dac93a  |  rtb-0d4fb188c66b62c98  |  subnet-0ae613de296de90d6  |||
||+------+------------------------------+-------------------------+----------------------------+||
||||                                     AssociationState                                     ||||
|||+----------------------------------+-------------------------------------------------------+|||
||||  State                           |  associated                                           ||||
|||+----------------------------------+-------------------------------------------------------+|||
|||                                           Routes                                           |||
||+--------------------------------+-----------------+---------------------------+-------------+||
|||      DestinationCidrBlock      |    GatewayId    |          Origin           |    State    |||
||+--------------------------------+-----------------+---------------------------+-------------+||
|||  192.168.0.0/16                |  local          |  CreateRouteTable         |  active     |||
||+--------------------------------+-----------------+---------------------------+-------------+||
|||                                            Tags                                            |||
||+-------------------+------------------------------------------------------------------------+||
|||        Key        |                                 Value                                  |||
||+-------------------+------------------------------------------------------------------------+||
|||  Name             |  devopsacademy-rt-private                                              |||
||+-------------------+------------------------------------------------------------------------+||


➜  ~ aws ec2 associate-route-table --route-table-id rtb-00e38d03338e4d707 --subnet-id subnet-0baf3a3a83b8df14c
➜  ~ aws ec2 associate-route-table --route-table-id rtb-00e38d03338e4d707 --subnet-id subnet-08500379e763425ee
➜  ~ aws ec2 associate-route-table --route-table-id rtb-00e38d03338e4d707 --subnet-id subnet-070006a36558f1750
➜  ~ aws ec2 describe-route-tables --route-table-ids rtb-00e38d03338e4d707
--------------------------------------------------------------------------------------------------
|                                       DescribeRouteTables                                      |
+------------------------------------------------------------------------------------------------+
||                                          RouteTables                                         ||
|+---------------------+-----------------------------------+------------------------------------+|
||       OwnerId       |           RouteTableId            |               VpcId                ||
|+---------------------+-----------------------------------+------------------------------------+|
||  738343455957       |  rtb-00e38d03338e4d707            |  vpc-01cf6494735903d97             ||
|+---------------------+-----------------------------------+------------------------------------+|
|||                                        Associations                                        |||
||+------+------------------------------+-------------------------+----------------------------+||
||| Main |   RouteTableAssociationId    |      RouteTableId       |         SubnetId           |||
||+------+------------------------------+-------------------------+----------------------------+||
|||False |  rtbassoc-0c75f2f8dba163952  |  rtb-00e38d03338e4d707  |  subnet-08500379e763425ee  |||
||+------+------------------------------+-------------------------+----------------------------+||
||||                                     AssociationState                                     ||||
|||+----------------------------------+-------------------------------------------------------+|||
||||  State                           |  associated                                           ||||
|||+----------------------------------+-------------------------------------------------------+|||
|||                                        Associations                                        |||
||+------+------------------------------+-------------------------+----------------------------+||
||| Main |   RouteTableAssociationId    |      RouteTableId       |         SubnetId           |||
||+------+------------------------------+-------------------------+----------------------------+||
|||False |  rtbassoc-06ec5587ba4eaf1e5  |  rtb-00e38d03338e4d707  |  subnet-070006a36558f1750  |||
||+------+------------------------------+-------------------------+----------------------------+||
||||                                     AssociationState                                     ||||
|||+----------------------------------+-------------------------------------------------------+|||
||||  State                           |  associated                                           ||||
|||+----------------------------------+-------------------------------------------------------+|||
|||                                        Associations                                        |||
||+------+------------------------------+-------------------------+----------------------------+||
||| Main |   RouteTableAssociationId    |      RouteTableId       |         SubnetId           |||
||+------+------------------------------+-------------------------+----------------------------+||
|||False |  rtbassoc-0885419fbf4fbef58  |  rtb-00e38d03338e4d707  |  subnet-0baf3a3a83b8df14c  |||
||+------+------------------------------+-------------------------+----------------------------+||
||||                                     AssociationState                                     ||||
|||+----------------------------------+-------------------------------------------------------+|||
||||  State                           |  associated                                           ||||
|||+----------------------------------+-------------------------------------------------------+|||
|||                                           Routes                                           |||
||+--------------------------------+-----------------+---------------------------+-------------+||
|||      DestinationCidrBlock      |    GatewayId    |          Origin           |    State    |||
||+--------------------------------+-----------------+---------------------------+-------------+||
|||  192.168.0.0/16                |  local          |  CreateRouteTable         |  active     |||
||+--------------------------------+-----------------+---------------------------+-------------+||
|||                                            Tags                                            |||
||+-------------------+------------------------------------------------------------------------+||
|||        Key        |                                 Value                                  |||
||+-------------------+------------------------------------------------------------------------+||
|||  Name             |  devopsacademy-rt-public                                               |||
||+-------------------+------------------------------------------------------------------------+||
```

- Commands for creating the following routes:

|route table|destination|target|
|-|-|-|
|devopsacademy-rt-public|0.0.0.0|`devopsacademy-igw`|
|devopsacademy-rt-private|0.0.0.0|`devopsacademy-ngw`|
First was the public route:
➜  ~ aws ec2 create-route  --route-table-id rtb-00e38d03338e4d707 --destination-cidr-block 0.0.0.0/0 --gateway-id igw-003f27538abfc25b6
Then the private:
aws ec2 allocate-address --domain vpc
aws ec2 create-nat-gateway --subnet-id subnet-0ae613de296de90d6 --allocation-id eipalloc-0865c0d1f58a006dd
aws ec2 create-tags --resources nat-015db70fb289a5064 --tags Key=Name,Value=DevopsAcademy-ngw
aws ec2 create-route  --route-table-id rtb-0d4fb188c66b62c98  --destination-cidr-block 0.0.0.0/0 --nat-gateway-id nat-015db70fb289a5064
```
Add your commands and their outputs here
```

- Answer the following questions:
  - Why did you add 0.0.0.0 route to the IGW on public route table?
    ```
    This allows all traffic to enter and exit - this is vital for a public route as the end users will need to access the server if it is to be used. 
    ```

  - Why did you add 0.0.0.0 route to the NGW on private route table?
    ```
    This enables the private routes to communicate on all addresses available via ipv4.
    ```
    
  - What is the difference of IGW and NGW?
    ```
    Both devices allow your servers to communicate to the internet but the IGW allows outside traffic to communicate to your servers whereas the NAT gateway only allows outgoing traffic to initiate the connection - anything outside the network is unable to start a session.
    ```
    
  - Can you delete the destination route to your VPC network? Why?
    ```
    No as the local route is required by default to allow resources within the VPC to communicate within the VPC itself. 
    ```
    
  - What happens if you do not associate your route table with any subnets?
    ```
    Without any subnets associated the route table does functionally nothing as it requires a subnet to be associated for it to work.
    ```


- Any extra challenges faced?


<!-- Don't change anything below this point-->
***
Answer for exercise [c02-network07](https://github.com/devopsacademyau/academy/blob/477b00517edd51ed2e46038ec310d324a0d3f252/classes/02class/exercises/c02-network07/README.md)